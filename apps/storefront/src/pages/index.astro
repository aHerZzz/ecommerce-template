---
import BaseLayout from '../layouts/BaseLayout.astro';
import type { Product } from '../types/store';
import { fetchProducts } from '../services/products';
import { StorefrontApp } from '../components/StorefrontApp';
import { storeSettings } from '../config/store';

let productList: Product[] = [];
try {
  productList = await fetchProducts();
} catch (error) {
  console.error('No se pudo cargar el cat√°logo inicial', error);
}
---
<BaseLayout title={storeSettings.branding.storeName} description={storeSettings.branding.tagline}>
  <section class="flex flex-col gap-6">
    <div class="space-y-1">
      <h1 class="text-3xl font-bold">{storeSettings.branding.storeName}</h1>
      <p class="text-slate-600">{storeSettings.branding.tagline}</p>
    </div>
    <StorefrontApp client:load products={productList} />
  </section>
</BaseLayout>
